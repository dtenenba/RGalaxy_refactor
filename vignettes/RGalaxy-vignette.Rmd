
````{r setup, echo=FALSE}
options(width = 75)
options(useFancyQuotes=FALSE)
```

```{r hook-printfun, echo=FALSE}
knit_hooks$set(printfun = function(before, options, envir) {
  if (before) return()
  txt = capture.output(dump(options$printfun, '', envir = envir))
  ## reformat if tidy=TRUE
  if (options$tidy)
  	txt = formatR::tidy.source(text=txt, output=FALSE,
  		width.cutoff=30L, keep.comment=TRUE,
  		keep.blank.line=FALSE)$text.tidy
  paste(c('\n```r\n', txt, '\n```\n'), collapse="\n")
})
```

# RGalaxy

[Galaxy](http://galaxyproject.org/)
is an open, web-based platform for data intensive biomedical research.
It provides an easy-to-use web interface and can expose bioinformatics
workflows written in any programming language.

Normally, in order to expose new functionality (a tool in Galaxy parlance)
in a Galaxy instance, you have to manually create an XML file with
information about the function, and modify an additional XML file.

The `RGalaxy` package automates this process, pulling most of the necessary
information from the function itself and its manual page (you provide the
remaining information as arguments to the `galaxy` function).

## A Simple Example

Let's say you want to create a Galaxy tool that adds two numbers.

First, load RGalaxy:

```{r library_RGalaxy_fake, eval=FALSE}
library(RGalaxy)
```
```{r library_RGalaxy_real, echo=FALSE, results="hide"}
suppressPackageStartupMessages(library(RGalaxy))
```
Then write a function like this:
```{r addTwoNumbers, printfun='addTwoNumbers', echo=FALSE, tidy=FALSE}
#source code goes here
```

There are a few things to notice about this function:

* The data type of each parameter is specified. And instead of 
  just specifying `R`'s `numeric` type, we are using a special
  class called `GalaxyNumericParam`.
* The return value of the function is not important. 
* All the function's inputs and outputs are specified as
  arguments in its signature.
* By default, parameters are marked as not required by Galaxy.
  Adding `required=TRUE` tells Galaxy not to allow empty values.
* This function can be run from within R:

```{r run_addTwoNumbers}
t <- tempfile()
addTwoNumbers(2, 2, t)
readLines(t, warn=FALSE)
```

